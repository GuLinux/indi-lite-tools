# We need https for geolocation updates
server {
	listen 80 default_server;
	listen [::]:80 default_server;
    server_name _;
    return 301 https://$host$request_uri;
}

server {
	# SSL configuration
	#
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
	#
	# Self signed certs generated by the ssl-cert package
	# Don't use them in a production server!
	#
	# include snippets/snakeoil.conf;
	#
	server_name _;
    ssl_certificate /etc/nginx/ssl/nginx.crt;
    ssl_certificate_key /etc/nginx/ssl/nginx.key;

	location / {
        proxy_pass http://localhost:5100/;
	}
        location /static {
            root /opt/indi-lite-tools/dashboard/;
    		try_files $uri $uri/ =404;
        }


        location /indi-panel {
            proxy_pass http://localhost:8624/;
        }

        location /indi-preview {
            proxy_pass http://localhost:5000/;
        }

        location /shellinabox {
            proxy_pass http://localhost:4200/;
        }
}

